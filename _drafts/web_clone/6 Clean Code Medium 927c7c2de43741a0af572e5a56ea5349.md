# ç¬¬ 6 ç«  ç‰©ä»¶åŠè³‡æ–™çµæ§‹| Clean Code - æ‰‹å¯«ç­†è¨˜ - Medium

[https://medium.com/%E6%89%8B%E5%AF%AB%E7%AD%86%E8%A8%98/objects-and-data-structures-354cf1e302c8](https://medium.com/%E6%89%8B%E5%AF%AB%E7%AD%86%E8%A8%98/objects-and-data-structures-354cf1e302c8)

![1*U8RD8lCnkkhqf2rUZOC1vg.jpeg](6%20Clean%20Code%20Medium%20927c7c2de43741a0af572e5a56ea5349/1U8RD8lCnkkhqf2rUZOC1vg.jpeg)

```
ğŸ”– æ–‡ç« ç´¢å¼•1. Getter-Setter and private variables
2. è³‡æ–™çµæ§‹èˆ‡ç‰©ä»¶çš„å·®åˆ¥
3. å¾·æ‘©ç‰¹çˆ¾æ³•å‰‡ (The Law of Demeter)
4. å°çµ
```

# **Getter-Setter and private variables**

ä½œè€…åœ¨æ›¸ä¸­æé†’æˆ‘å€‘é€™ä»¶äº‹ï¼Œæˆ‘å€‘ä½¿ç”¨ç§æœ‰ (private) è®Šæ•¸çš„ç†ç”±æ˜¯ã€Œ**ä¸å¸Œæœ›ä»»ä½•äººä¾è³´é€™äº›è®Šæ•¸**ã€ï¼Œä½†æ˜¯æœ‰è¨±å¤šå·¥ç¨‹å¸«æœƒè‡ªå‹•ç‚ºå®ƒå€‘åŠ ä¸Š getter èˆ‡ setterï¼Œè®“ç§æœ‰è®Šæ•¸å¦‚åŒå…¬ç”¨ (public) è®Šæ•¸ä¸€èˆ¬ã€‚

> å»¶ä¼¸é–±è®€ï¼šÂ ğŸ”— Why do we need private variables?

# **è³‡æ–™çµæ§‹èˆ‡ç‰©ä»¶çš„å·®åˆ¥**

åœ¨é€™å€‹ç« ç¯€ä¸­ï¼Œä½œè€…è§£é‡‹**è³‡æ–™çµæ§‹ (Data Structure) èˆ‡ç‰©ä»¶ (Object) ç‚ºä½•ä¸åŒ**ï¼Œè€Œä¸”å®ƒå€‘æ˜¯åå°ç¨±æ€§çš„å­˜åœ¨ï¼š

- **è³‡æ–™çµæ§‹**ï¼šå°‡è³‡æ–™ç›´æ¥æš´éœ²åœ¨å¤–ï¼Œå¯ä»¥ç›´æ¥å°è³‡æ–™è®€å–èˆ‡å¯«å…¥ã€‚ä¾‹å¦‚ï¼šlistã€dictã€set ç­‰ã€‚
- **ç‰©ä»¶**ï¼šå°‡è³‡æ–™éš±è—èµ·ä¾†ï¼Œæä¾›å¯ä»¥æ“ä½œé€™äº›è³‡æ–™çš„å‡½å¼åœ¨å¤–é¢ã€‚ä¾‹å¦‚ï¼šÂ [ğŸ•¸ Crawler](https://github.com/scrapy/scrapy/blob/master/scrapy/crawler.py#L28)ã€[ğŸ•¸ CrawlerRunner](https://github.com/scrapy/scrapy/blob/master/scrapy/crawler.py#L119)ã€Â [ğŸ•¸ CrawlerProcess](https://github.com/scrapy/scrapy/blob/master/scrapy/crawler.py#L240)ã€‚

> ğŸ”— é€™ä¸€ç¯‡Â å°æ–¼è³‡æ–™çµæ§‹èˆ‡ç‰©ä»¶æœ‰å¾ˆå¥½çš„è§£é‡‹ï¼Œå¤§å®¶ä¸å¦¨å¯ä»¥çœ‹çœ‹ã€‚

# **å¾·æ‘©ç‰¹çˆ¾æ³•å‰‡ (The Law of Demeter)**

å¾·æ‘©ç‰¹çˆ¾æ³•å‰‡åˆå¯ä»¥ç¨±ä½œã€Œ**æœ€å°‘çŸ¥è­˜åŸå‰‡**ã€ï¼Œå¼•ç”¨è‡³Â [ğŸ”— ç¶­åŸºç™¾ç§‘ä¸Šå°æ–¼ LoD çš„æ•˜è¿°](https://en.wikipedia.org/wiki/Law_of_Demeter)ï¼š

```
ç¬¦åˆ LoD çš„å‡½å¼è¦æ±‚åœ¨ç‰©ä»¶ O ä¸­çš„å‡½å¼ m åªèƒ½èª¿ç”¨ä»¥ä¸‹å¹¾ç¨®é¡å‹çš„å‡½å¼ï¼š
1. O æœ¬èº«
2. m çš„åƒæ•¸
3. åœ¨ m ä¸­å»ºç«‹çš„ç‰©ä»¶
4. å®£å‘Šåœ¨ O ä¸­çš„ç‰©ä»¶
5. è¢« O å­˜å–çš„å…¨åŸŸè®Šæ•¸ï¼Œä¸¦ä¸”åœ¨ m çš„ scope ä¸­
```

LoD ç¯„ä¾‹ä½¿ç”¨ Pythonï¼š

```python
e = E()

class O:
    def __init__(self):
        self.a = A()

    def m(self, b):
        result = self.f()   # O æœ¬èº«çš„å‡½å¼
        b.execute()         # m çš„åƒæ•¸
        d = D()             # åœ¨ m ä¸­å»ºç«‹çš„ç‰©ä»¶
        d.join()
        self.a.run()        # å®£å‘Šåœ¨ O ä¸­çš„ç‰©ä»¶
        e.jump()            # è¢« O å­˜å–çš„å…¨åŸŸè®Šæ•¸ï¼Œä¸¦ä¸”åœ¨ m çš„ scope ä¸­

    def f(self):
        return 1+1
```

å¦‚æœä½ åœ¨ç¶²è·¯ä¸Šæœå°‹ï¼Œä¹Ÿè¨±æœƒçœ‹åˆ°æœ‰äººèªªï¼šã€ŒLoD ç¦æ­¢åœ¨ä¸€è¡Œç¨‹å¼ç¢¼ä¸­ä½¿ç”¨å¤šå€‹ dotã€ï¼Œé€™å¥è©±æ˜¯ä¸€åŠå°ä¸€åŠéŒ¯ï¼Œä½¿ç”¨å¤šå€‹ dot çš„å‰é¡Œæ˜¯ã€Œ**ä½ çŸ¥é“å®ƒå€‘æ˜¯è³‡æ–™çµæ§‹é‚„æ˜¯ç‰©ä»¶**ã€ã€‚

å¦‚æœæ˜¯ç‰©ä»¶ï¼Œå‰‡ç ´å£äº†ç‰©ä»¶å°è£ï¼›è€Œå¦‚æœæ˜¯è³‡æ–™çµæ§‹ï¼Œè³‡æ–™çµæ§‹æœ¬ä¾†å°±æš´éœ²äº†è³‡æ–™åœ¨å¤–é¢ï¼Œæ‰€ä»¥é€éå·¢ç‹€å­˜å–è³‡æ–™æ˜¯æ²’æœ‰å•é¡Œçš„ã€‚

```cpp
// ç ´å£å°è£ï¼Œé•å LoD
class A {
    fun(b) {
        b.getOption().getSelection()
    }
}

// å­˜å–è³‡æ–™çµæ§‹ï¼Œæ²’æœ‰é•å LoD 
data = {
    a: {
        b: 2
    }
}
console.log(data.a.b)
```

> ä½ ä¸æ‡‰è©²è®“ä¸€å€‹å‡½å¼çŸ¥é“å¤ªå¤šäº‹æƒ…ï¼Œå¦å‰‡æœƒç ´å£ç‰©ä»¶å°è£åŸæœ¬çš„æ„ç¾©ã€‚

# **å°çµ**

åœ¨ç‰©ä»¶èˆ‡è³‡æ–™çµæ§‹é€™å€‹ç« ç¯€ï¼Œæˆ‘å€‘é¦–å…ˆè«‡åˆ°ç‰©ä»¶çš„ç§æœ‰è®Šæ•¸ä¸æ‡‰è©²éš¨æ„å°‡å®ƒå€‘æš´éœ²åœ¨å¤–ï¼Œç‰©ä»¶å³æ˜¯è¦éš±è—å…¶å…§å®¹ï¼Œåªè®“å¤–éƒ¨çš„äººçœ‹è¦‹å®ƒå€‘æƒ³å…¬é–‹çš„è¡Œç‚ºï¼›å› æ­¤ï¼Œé–‹ç™¼æ™‚å¿…é ˆå°å¿ƒè¬¹æ…ç®¡ç†ç§æœ‰è®Šæ•¸ï¼Œå¦å‰‡ç§æœ‰è®Šæ•¸å°‡å¦‚åŒå…¬æœ‰è®Šæ•¸å½±éŸ¿æ•´å€‹ç³»çµ±ã€‚

æ­¤å¤–ï¼Œæˆ‘å€‘è«‡åˆ°è³‡æ–™çµæ§‹èˆ‡ç‰©ä»¶çš„ä¸åŒä¹‹è™•ï¼Œä½ ç¶“å¸¸æœƒåœ¨å¯«ç¨‹å¼æ™‚ç”¨åˆ°é€™å…©ç¨®æŠ€å·§ï¼Œä½†æ˜¯å®ƒå€‘çš„æ„ç¾©æ˜¯ä¸ä¸€æ¨£çš„ï¼Œç‚ºäº†æ–¹ä¾¿ç®¡ç†èˆ‡ç¶­è­·ï¼Œå¿…é ˆæ™‚æ™‚åˆ»åˆ»åœ¨æ„ç©¶ç«Ÿç¾åœ¨å¯«çš„æ˜¯è³‡æ–™çµæ§‹é‚„æ˜¯ç‰©ä»¶ã€‚

æœ€å¾Œï¼Œå¾·æ‘©ç‰¹çˆ¾æ³•å‰‡æ˜¯ä¸€ç¨®æ’°å¯«ç¨‹å¼çš„è¦ç¯„ï¼Œæˆ‘å€‘ä¸æ‡‰è©²çŸ¥é“å¤ªå¤šç‰©ä»¶å…§çš„äº‹æƒ…ï¼Œå¦å‰‡å°±æœƒç ´å£ç‰©ä»¶çš„å°è£ï¼Œè®“è¢«ä½¿ç”¨çš„ç‰©ä»¶é›£ä»¥è¢«ç¶­è­·ã€‚

# **Reference**

- [Getter-Setter and private variables](https://stackoverflow.com/questions/22008180/getter-setter-and-private-variables/22008228#22008228)
- [å°è£èˆ‡è¿ªç±³ç‰¹æ³•å‰‡](https://www.ithome.com.tw/voice/98670)
- [Whats the difference between objects and data structures?](https://stackoverflow.com/questions/23406307/whats-the-difference-between-objects-and-data-structures)
- [Objects vs. Data Structures](https://hackernoon.com/objects-vs-data-structures-e380b962c1d2)
- [Object Oriented Tricks: #2 Law of Demeter](https://hackernoon.com/object-oriented-tricks-2-law-of-demeter-4ecc9becad85)

# **âœ‹ å»¶ä¼¸é–±è®€**

**[ç¬¬ 7 ç«  éŒ¯èª¤è™•ç† | Clean Code**Uncle Bobï¼šã€Œå¦‚æœæˆ‘å€‘ä¸éœ€è¦è™•ç†ä¾‹å¤–çš„æƒ…æ³ï¼Œé‚£ä¸æ˜¯æ›´å¥½å—ï¼Ÿã€medium.com](https://medium.com/%E6%89%8B%E5%AF%AB%E7%AD%86%E8%A8%98/error-handling-6132b22fe5c2)